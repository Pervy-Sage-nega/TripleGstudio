{% extends "site_diary/layout_format.html" %}
{% load static %}

{% block title %}Diary Logs - Triple G BuildHub{% endblock %}

{% block head %}
<link rel="stylesheet" href="{% static 'css/sitecss/header-container.css' %}">
<link rel="stylesheet" href="{% static 'css/sitecss/global-footer.css' %}">
<link rel="stylesheet" href="{% static 'css/sitecss/dashboard.css' %}">
<link rel="stylesheet" href="{% static 'css/sitecss/history.css' %}">
{% endblock %}

{% block body %}
<div class="container">
    <div class="dashboard-header">
        <div class="dashboard-title">
            <i class="fas fa-book"></i>
            <h1>Diary Logs - {{ project.name }}</h1>
        </div>
        <div class="user-info">
            <span>Total Entries: {{ total_entries }}</span>
        </div>
    </div>

    <div class="table-view" style="display: block;">
        <div class="table-responsive">
            <table>
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Milestone</th>
                        <th>Progress</th>
                        <th>Created By</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    {% for entry in page_obj %}
                    <tr>
                        <td>{{ entry.entry_date|date:"M d, Y" }}</td>
                        <td>{{ entry.milestone.name|default:"N/A" }}</td>
                        <td>{{ entry.progress_percentage|floatformat:0 }}%</td>
                        <td>{{ entry.created_by.get_full_name|default:entry.created_by.username }}</td>
                        <td>
                            <span class="status-badge {% if entry.status == 'complete' %}status-complete{% else %}status-revision{% endif %}">
                                {{ entry.get_status_display }}
                            </span>
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="5" class="text-center">No diary entries found.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    {% if page_obj.has_other_pages %}
    <div class="pagination">
        {% if page_obj.has_previous %}
        <a href="?project={{ project.id }}&page={{ page_obj.previous_page_number }}" class="page-btn"><i class="fas fa-chevron-left"></i></a>
        {% endif %}
        
        <button class="page-btn active">{{ page_obj.number }}</button>
        
        {% if page_obj.has_next %}
        <a href="?project={{ project.id }}&page={{ page_obj.next_page_number }}" class="page-btn"><i class="fas fa-chevron-right"></i></a>
        {% endif %}
    </div>
    {% endif %}
</div>

{% include "site_diary/navtemplate/layoutfooter.html" %}
{% endblock %}
